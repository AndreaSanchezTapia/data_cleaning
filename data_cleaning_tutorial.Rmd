---
title: "Basic workflow for biodiversity data cleaning using R"
author: "Sara Mortara & Andrea Sanchez Tapia"
date: "`r Sys.Date()`"
output:
    html_document:
        theme: cosmo
        toc: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
```

# 0. Loading packages

For this excercise, we will use the R environment. If you need to download it go to: https://www.r-project.org/. It is **strongly** recomendable to use an editor and we recommend the R Studio (https://rstudio.com).

For this tutorial, you will need to the R packages: `rgbif`, `Taxonstand` `CoordinateCleaner`. If you don't have them installed use the following commands:

```
install.packages("rgbif")
install.packages("Taxonstand")
install.packages("CoordinateCleaner")
```

Then, we'll start loading the packages.  

```{r loading pkg}
library(rgbif)
library(Taxonstand)
library(CoordinateCleaner)
```

# 1. Getting the data

First, let's download the data of a tree species from South America *Cariniana legalis* from the Lecythidaceae family.

You can also embed plots, for example:

```{r occs}
species <- "Cariniana legalis"
occs <- occ_search(scientificName = species, 
                   return = "data")
nrow(occs) #number of records 
```

In the raw data, we have `r nrow(occs)` records. 

Column names returned from gbif follows the DarwinCore standard (https://dwc.tdwg.org). 

```{r col-names}
colnames(occs)
```

# 2. Cleaning species name

Let's check the unique entries for the species name we just searched.

```{r sp-name}
table(occs$taxonomicStatus)
sort(unique(occs$scientificName))
```

For this particular case, we have two synonyms *Cariniana brasiliensis* and *Couratari legalis*. 
